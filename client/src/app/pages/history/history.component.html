<div id="container">
  <div id="header-container">
    <div id="playlist-thumbnail-background">
      <img
        [src]="(playlistDetail$ | async)?.playlist?.thumbnail_url"
        alt="playlist-thumbnail"
      />
    </div>
    <div id="playlist-info">
      <div id="playlist-thumbnail">
        <img
          [src]="(playlistDetail$ | async)?.playlist?.thumbnail_url"
          alt="playlist-thumbnail"
        />
        <div id="right-playlist-thumbnail">
          <div class="info">
            <h2 id="playlist-title">
              {{ (playlistDetail$ | async)?.playlist?.title }}
            </h2>
            <div class="top">
              <div id="user-avatar">
                <img [src]="(user$ | async)?.avatar_url" alt="user-avatar" />
              </div>
              <span id="user-name">{{ (user$ | async)?.username }}</span>
            </div>
            <span id="playlist-count">
              {{ (playlistDetail$ | async)?.videos?.length }} videos
              </span>
            <div id="action">
              <button mat-flat-button>
                <mat-icon
                  class="material-symbols-rounded"
                  fontIcon="play_arrow"
                ></mat-icon>
                Play all
              </button>
              <button mat-stroked-button id="shuffle-button">
                <mat-icon
                  class="material-symbols-rounded"
                  fontIcon="shuffle"
                  style="color: #f4f4f2"
                ></mat-icon>
                <p>Shuffle</p>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="content-container">
    <cdk-virtual-scroll-viewport id="main-content" itemSize="50">
      @defer (when (videos$ | async)?.length) {
        <div class="video-list">
          @for (video of videos$ | async; track $index) {
            <div class="history-group">
              <h3 class="watch-date">
                {{ video.watched_at }}
              </h3>

              <div class="video-items">
                @for (videoDetail of video.videos; track $index) {
                  <app-video-card-vertical
                    [video]="videoDetail.video_details"
                  ></app-video-card-vertical>
                }
              </div>
            </div>
          }
        </div>
      } @placeholder (minimum 1s) {
        <div class="video-list">
          <div class="history-group">
            <ngx-skeleton-loader
              [theme]="{ width: ' 110px', height: '20px' }"
              appearance="line"
            >
            </ngx-skeleton-loader>
            <div class="video-items">
              @for (_ of [].constructor(8); track $index) {
                <app-video-card-vertical-skeleton></app-video-card-vertical-skeleton>
              }
            </div>
          </div>
        </div>
      }
    </cdk-virtual-scroll-viewport>
  </div>
</div>
